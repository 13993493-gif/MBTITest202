<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>深度MBTI人格测试</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #7209b7;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4cc9f0;
            --warning: #f72585;
            --border-radius: 12px;
            --box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 40px 20px;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.8rem;
            color: var(--secondary);
            margin-bottom: 15px;
            font-weight: 700;
        }

        .subtitle {
            font-size: 1.2rem;
            color: var(--accent);
            max-width: 700px;
            margin: 0 auto;
        }

        .card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 30px;
            margin-bottom: 30px;
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.12);
        }

        .intro-section {
            text-align: center;
        }

        .intro-section p {
            margin-bottom: 25px;
            font-size: 1.1rem;
        }

        .btn {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 14px 32px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1rem;
            transition: var(--transition);
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3);
        }

        .btn:hover {
            background: var(--secondary);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(67, 97, 238, 0.4);
        }

        .btn-start {
            background: var(--accent);
            margin-top: 10px;
        }

        .btn-start:hover {
            background: var(--secondary);
        }

        .test-section {
            display: none;
        }

        .question-container {
            margin-bottom: 30px;
        }

        .question-number {
            font-size: 0.9rem;
            color: var(--accent);
            font-weight: 600;
            margin-bottom: 10px;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 25px;
            color: var(--secondary);
        }

        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 768px) {
            .options {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            border: 2px solid #e9ecef;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary);
            background-color: rgba(67, 97, 238, 0.05);
        }

        .option.selected {
            border-color: var(--primary);
            background-color: rgba(67, 97, 238, 0.1);
        }

        .option-text {
            margin-left: 15px;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
        }

        .btn-prev {
            background: #6c757d;
        }

        .btn-prev:hover {
            background: #5a6268;
        }

        .progress-container {
            margin-bottom: 30px;
        }

        .progress-bar {
            height: 8px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.5s ease;
        }

        .result-section {
            display: none;
            text-align: center;
        }

        .personality-type {
            font-size: 3.5rem;
            font-weight: 800;
            color: var(--accent);
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .type-description {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: var(--dark);
        }

        .traits {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .trait-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }

        .trait-title {
            font-weight: 600;
            color: var(--secondary);
            margin-bottom: 10px;
        }

        .detailed-analysis {
            text-align: left;
            margin-top: 40px;
        }

        .analysis-section {
            margin-bottom: 30px;
        }

        .analysis-title {
            font-size: 1.5rem;
            color: var(--secondary);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e9ecef;
        }

        footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            color: #6c757d;
            font-size: 0.9rem;
        }

        .mbti-logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .dimension-explanation {
            margin-top: 30px;
            padding: 20px;
            background-color: rgba(67, 97, 238, 0.05);
            border-radius: var(--border-radius);
        }
        
        .dimension-title {
            font-weight: 600;
            color: var(--secondary);
            margin-bottom: 10px;
        }
        
        .cognitive-functions {
            margin-top: 40px;
        }
        
        .function-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }
        
        .function-name {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .analysis-point {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }
        
        .point-title {
            font-weight: 600;
            color: var(--accent);
            margin-bottom: 10px;
        }
        
        .type-stat {
            font-size: 0.9rem;
            color: #6c757d;
            margin-top: 5px;
        }
        
        .relationship-dynamics {
            margin-top: 20px;
        }
        
        .compatibility-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .compatibility-item {
            background: white;
            border-radius: var(--border-radius);
            padding: 15px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }
        
        .compatibility-type {
            font-weight: 600;
            color: var(--secondary);
        }
        
        .compatibility-level {
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        .high { color: #4caf50; }
        .medium { color: #ff9800; }
        .low { color: #f44336; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>深度MBTI人格测试</h1>
            <p class="subtitle">基于荣格心理学理论的科学人格评估，探索真实的自我</p>
        </header>

        <div class="card intro-section" id="intro-section">
            <h2>认识你的性格类型</h2>
            <p>MBTI（Myers-Briggs Type Indicator）是一种迫选型、自我报告式的人格测评工具，用以衡量和描述人们在获取信息、作出决策、对待生活等方面的心理活动规律和不同的人格类型表现。</p>
            <p>本测试包含60道深度题目，基于荣格心理学理论设计，通过评估您在四个维度上的偏好，确定您的16种人格类型之一。</p>
            <p>测试需要大约15-20分钟完成，请根据您的第一反应选择答案，无需过多思考。</p>
            <button class="btn btn-start" id="start-test">开始测试</button>
        </div>

        <div class="card test-section" id="test-section">
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress" id="progress-bar"></div>
                </div>
                <div class="question-number" id="progress-text">问题 1/60</div>
            </div>
            
            <div class="question-container">
                <div class="question-text" id="question-text">您通常如何获取能量？</div>
                <div class="options" id="options-container">
                    <!-- 选项将通过JavaScript动态生成 -->
                </div>
            </div>
            
            <div class="navigation">
                <button class="btn btn-prev" id="prev-btn" disabled><i class="fas fa-arrow-left"></i> 上一题</button>
                <button class="btn" id="next-btn">下一题 <i class="fas fa-arrow-right"></i></button>
            </div>
        </div>

        <div class="card result-section" id="result-section">
            <h2>您的MBTI人格类型是</h2>
            <div class="personality-type" id="personality-type">INFJ</div>
            <p class="type-description" id="type-description">提倡者人格 - 安静而神秘，同时鼓舞人心且不知疲倦的理想主义者</p>
            
            <div class="traits">
                <div class="trait-card">
                    <div class="trait-title">能量倾向</div>
                    <div id="energy-trait">内向 (I)</div>
                    <div class="type-stat" id="energy-stat">约占人口的1-3%</div>
                </div>
                <div class="trait-card">
                    <div class="trait-title">认知功能</div>
                    <div id="cognitive-trait">直觉 (N)</div>
                    <div class="type-stat" id="cognitive-stat">关注抽象概念和未来可能性</div>
                </div>
                <div class="trait-card">
                    <div class="trait-title">判断方式</div>
                    <div id="judgment-trait">情感 (F)</div>
                    <div class="type-stat" id="judgment-stat">基于价值观和人际关系决策</div>
                </div>
                <div class="trait-card">
                    <div class="trait-title">生活态度</div>
                    <div id="attitude-trait">判断 (J)</div>
                    <div class="type-stat" id="attitude-stat">偏好有计划、有组织的生活方式</div>
                </div>
            </div>
            
            <div class="detailed-analysis">
                <div class="analysis-section">
                    <h3 class="analysis-title">人格深度分析</h3>
                    <p id="trait-analysis">INFJ类型的人是不知疲倦的理想主义者，他们富有想象力且意志坚定，能够将愿景变为现实。他们受到价值观的驱动，寻求生活中的意义和联系，并希望帮助他人实现潜能。INFJ对人际关系深刻而复杂，既渴望亲密又需要独处时间。</p>
                    
                    <div class="analysis-grid">
                        <div class="analysis-point">
                            <div class="point-title">核心价值观</div>
                            <p>真诚、完整性、和谐、个人成长、为他人服务</p>
                        </div>
                        <div class="analysis-point">
                            <div class="point-title">内在驱动力</div>
                            <p>寻求意义和理解，创造积极变化，帮助他人实现潜能</p>
                        </div>
                        <div class="analysis-point">
                            <div class="point-title">恐惧与不安</div>
                            <p>被误解、失去个人价值感、无法实现理想、伤害他人</p>
                        </div>
                    </div>
                </div>
                
                <div class="analysis-section">
                    <h3 class="analysis-title">优势与潜在盲点</h3>
                    <div id="strengths-weaknesses">
                        <div class="analysis-grid">
                            <div class="analysis-point">
                                <div class="point-title">核心优势</div>
                                <p>富有创造力、洞察力强、原则性强、热情坚定、利他主义、善于理解复杂概念</p>
                            </div>
                            <div class="analysis-point">
                                <div class="point-title">潜在盲点</div>
                                <p>对批评敏感、完美主义倾向、容易倦怠、过度理想化、忽视实际细节、过度付出</p>
                            </div>
                            <div class="analysis-point">
                                <div class="point-title">成长建议</div>
                                <p>学会设立界限、接受不完美、平衡理想与现实、发展务实技能、练习自我关怀</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="cognitive-functions">
                    <h3 class="analysis-title">认知功能分析</h3>
                    <div id="cognitive-functions-container">
                        <!-- 认知功能将通过JavaScript动态生成 -->
                    </div>
                </div>
                
                <div class="analysis-section">
                    <h3 class="analysis-title">职业发展建议</h3>
                    <p id="career-advice">INFJ在能够表达其价值观并帮助他人的职业中最为满足。适合的职业包括心理咨询师、教师、作家、艺术家、人力资源专家、社会工作者等。他们需要工作环境能够尊重他们的洞察力和创造力，并提供一定的自主权。</p>
                    
                    <div class="analysis-grid">
                        <div class="analysis-point">
                            <div class="point-title">理想工作环境</div>
                            <p>安静有序、重视个人价值、允许深度工作、有明确使命、支持个人成长</p>
                        </div>
                        <div class="analysis-point">
                            <div class="point-title">职业发展路径</div>
                            <p>从专业领域开始，逐步发展为导师或领导者，专注于能够产生深远影响的领域</p>
                        </div>
                        <div class="analysis-point">
                            <div class="point-title">领导风格</div>
                            <p>鼓舞人心、重视团队成员发展、关注整体愿景、促进和谐合作</p>
                        </div>
                    </div>
                </div>
                
                <div class="analysis-section">
                    <h3 class="analysis-title">亲密关系与家庭</h3>
                    <p id="relationship-advice">INFJ在人际关系中寻求深度和意义，他们重视真诚和情感联系。他们需要学会设立界限，避免过度付出。与思考型人格相处时，INFJ需要明确表达自己的情感需求，同时也要理解对方可能更注重逻辑而非情感表达。</p>
                    
                    <div class="analysis-grid">
                        <div class="analysis-point">
                            <div class="point-title">恋爱关系特点</div>
                            <p>忠诚、深情、寻求灵魂伴侣、重视深度连接、需要个人空间</p>
                        </div>
                        <div class="analysis-point">
                            <div class="point-title">家庭角色</div>
                            <p>情感支持者、价值观传递者、和谐维护者、深度沟通者</p>
                        </div>
                        <div class="analysis-point">
                            <div class="point-title">关系挑战</div>
                            <p>过度理想化伴侣、情感需求表达不足、冲突回避、过度牺牲自我</p>
                        </div>
                    </div>
                </div>
                
                <div class="analysis-section">
                    <h3 class="analysis-title">人际交往模式</h3>
                    <div class="analysis-grid">
                        <div class="analysis-point">
                            <div class="point-title">社交偏好</div>
                            <p>深度一对一会话、小团体交流、有意义的话题讨论、避免表面社交</p>
                        </div>
                        <div class="analysis-point">
                            <div class="point-title">沟通风格</div>
                            <p>富有同理心、隐喻式表达、关注深层含义、有时过于复杂</p>
                        </div>
                        <div class="analysis-point">
                            <div class="point-title">友谊模式</div>
                            <p>少量深度友谊、长期忠诚、共享价值观、情感支持</p>
                        </div>
                    </div>
                    
                    <div class="relationship-dynamics">
                        <div class="point-title">类型相容性分析</div>
                        <div class="compatibility-grid">
                            <div class="compatibility-item">
                                <div class="compatibility-type">ENFP / ENTP</div>
                                <div class="compatibility-level high">高度相容</div>
                                <div class="type-stat">共享直觉功能，激发创造力</div>
                            </div>
                            <div class="compatibility-item">
                                <div class="compatibility-type">INTJ / ENTJ</div>
                                <div class="compatibility-level medium">中等相容</div>
                                <div class="type-stat">互补的判断功能，需沟通差异</div>
                            </div>
                            <div class="compatibility-item">
                                <div class="compatibility-type">ESTJ / ISTJ</div>
                                <div class="compatibility-level low">挑战性关系</div>
                                <div class="type-stat">认知功能差异较大</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="dimension-explanation">
                    <h3 class="analysis-title">MBTI维度解析</h3>
                    <div class="dimension-title">外向(E) vs 内向(I)</div>
                    <p>这个维度描述了个体获取能量的方式。外向型从外部世界和人际互动中获得能量，而内向型从内心世界和独处中获得能量。</p>
                    
                    <div class="dimension-title">感觉(S) vs 直觉(N)</div>
                    <p>这个维度描述了个体收集信息的方式。感觉型关注具体事实和实际细节，而直觉型关注整体模式、可能性和未来展望。</p>
                    
                    <div class="dimension-title">思考(T) vs 情感(F)</div>
                    <p>这个维度描述了个体做决策的方式。思考型基于逻辑和客观分析做决策，而情感型基于价值观和人际关系影响做决策。</p>
                    
                    <div class="dimension-title">判断(J) vs 感知(P)</div>
                    <p>这个维度描述了个体对待生活的方式。判断型偏好有计划、有组织的生活方式，而感知型偏好灵活、自发的生活方式。</p>
                </div>
            </div>
            
            <button class="btn" id="restart-btn">重新测试</button>
        </div>
        
        <footer>
            <div class="mbti-logo">MBTI®</div>
            <p>本测试基于荣格心理学理论和MBTI类型指标设计，仅供个人成长参考使用</p>
            <p>© 2023 深度MBTI人格测试 | 科学理解自我</p>
        </footer>
    </div>

    <script>
        // MBTI测试数据 - 60道专业题目
        const questions = [
            // 外向(E) vs 内向(I) 维度 - 15题
            {
                text: "当您参加社交活动后，通常感觉如何？",
                dimension: "EI",
                options: [
                    { text: "感到精力充沛，希望活动继续", score: "E" },
                    { text: "感到疲惫，需要独处恢复能量", score: "I" }
                ]
            },
            {
                text: "在团队中，您通常：",
                dimension: "EI",
                options: [
                    { text: "主动表达想法，积极参与讨论", score: "E" },
                    { text: "先倾听和思考，再选择性发言", score: "I" }
                ]
            },
            // 为简化示例，这里只展示部分题目
            // 实际应有60道题目
        ];

        // 人格类型描述数据
        const personalityData = {
            "INFJ": {
                name: "提倡者",
                description: "安静而神秘，同时鼓舞人心且不知疲倦的理想主义者",
                energy: "内向 (I)",
                cognitive: "直觉 (N)",
                judgment: "情感 (F)",
                attitude: "判断 (J)",
                population: "约占人口的1-3%",
                analysis: "INFJ类型的人是不知疲倦的理想主义者，他们富有想象力且意志坚定，能够将愿景变为现实。他们受到价值观的驱动，寻求生活中的意义和联系，并希望帮助他人实现潜能。INFJ对人际关系深刻而复杂，既渴望亲密又需要独处时间。",
                strengths: "富有创造力、洞察力强、原则性强、热情坚定、利他主义",
                weaknesses: "对批评敏感、完美主义倾向、容易倦怠、过度理想化",
                career: "INFJ在能够表达其价值观并帮助他人的职业中最为满足。适合的职业包括心理咨询师、教师、作家、艺术家、人力资源专家、社会工作者等。他们需要工作环境能够尊重他们的洞察力和创造力，并提供一定的自主权。",
                relationships: "INFJ在人际关系中寻求深度和意义，他们重视真诚和情感联系。他们需要学会设立界限，避免过度付出。与思考型人格相处时，INFJ需要明确表达自己的情感需求，同时也要理解对方可能更注重逻辑而非情感表达。",
                cognitiveFunctions: [
                    { name: "主导功能：内向直觉(Ni)", description: "能够看到深层模式和未来可能性，具有预见性思维。INFJ通过这一功能形成深刻的洞察力和对未来发展的准确预测。" },
                    { name: "辅助功能：外向情感(Fe)", description: "关注他人情感和团体和谐，能够理解并回应他人需求。这一功能使INFJ能够与他人建立深厚的情感联系。" },
                    { name: "第三功能：内向思考(Ti)", description: "构建内部逻辑框架，分析概念和想法的一致性。帮助INFJ在决策时平衡情感和逻辑。" },
                    { name: "劣势功能：外向感觉(Se)", description: "关注当下环境和具体细节，可能忽视实际现实。这是INFJ最不发达的功能，可能导致他们忽视现实细节。" }
                ],
                coreValues: "真诚、完整性、和谐、个人成长、为他人服务",
                innerDrive: "寻求意义和理解，创造积极变化，帮助他人实现潜能",
                fears: "被误解、失去个人价值感、无法实现理想、伤害他人",
                idealEnvironment: "安静有序、重视个人价值、允许深度工作、有明确使命、支持个人成长",
                careerPath: "从专业领域开始，逐步发展为导师或领导者，专注于能够产生深远影响的领域",
                leadershipStyle: "鼓舞人心、重视团队成员发展、关注整体愿景、促进和谐合作",
                relationshipTraits: "忠诚、深情、寻求灵魂伴侣、重视深度连接、需要个人空间",
                familyRole: "情感支持者、价值观传递者、和谐维护者、深度沟通者",
                relationshipChallenges: "过度理想化伴侣、情感需求表达不足、冲突回避、过度牺牲自我",
                socialPreferences: "深度一对一会话、小团体交流、有意义的话题讨论、避免表面社交",
                communicationStyle: "富有同理心、隐喻式表达、关注深层含义、有时过于复杂",
                friendshipPattern: "少量深度友谊、长期忠诚、共享价值观、情感支持",
                growthAdvice: "学会设立界限、接受不完美、平衡理想与现实、发展务实技能、练习自我关怀"
            },
            "ENFP": {
                name: "活动家",
                description: "热情、有创造力、社交能力强，总能找到理由微笑",
                energy: "外向 (E)",
                cognitive: "直觉 (N)",
                judgment: "情感 (F)",
                attitude: "感知 (P)",
                population: "约占人口的7-8%",
                analysis: "ENFP类型的人是真正富有自由精神的人。他们常常是聚会上的焦点，但与其说他们是社交达人，不如说他们是敏锐、热情的人际关系观察者，他们与人群建立深刻的情感联系。",
                strengths: "热情、富有想象力、洞察人际关系、沟通能力强、适应性强",
                weaknesses: "不切实际、容易分心、过度理想化、拖延倾向",
                career: "ENFP在能够发挥创造力和人际交往能力的职业中表现最佳。适合的职业包括咨询师、心理学家、记者、演员、教师、人力资源专家等。",
                relationships: "ENFP在人际关系中充满热情和活力，他们重视真诚和深度的联系。他们需要学会专注和完成项目，同时也要注意不要过度承诺。",
                cognitiveFunctions: [
                    { name: "主导功能：外向直觉(Ne)", description: "能够看到多种可能性和联系，善于产生新想法" },
                    { name: "辅助功能：内向情感(Fi)", description: "拥有深刻的个人价值观和道德准则" },
                    { name: "第三功能：外向思考(Te)", description: "能够组织外部世界，有效实施计划" },
                    { name: "劣势功能：内向感觉(Si)", description: "关注过去经验和具体细节，可能忽视传统和常规" }
                ]
            }
            // 实际应用中应包含所有16种类型
        };

        // DOM元素
        const introSection = document.getElementById('intro-section');
        const testSection = document.getElementById('test-section');
        const resultSection = document.getElementById('result-section');
        const startTestBtn = document.getElementById('start-test');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        
        // 结果页面元素
        const personalityType = document.getElementById('personality-type');
        const typeDescription = document.getElementById('type-description');
        const energyTrait = document.getElementById('energy-trait');
        const cognitiveTrait = document.getElementById('cognitive-trait');
        const judgmentTrait = document.getElementById('judgment-trait');
        const attitudeTrait = document.getElementById('attitude-trait');
        const energyStat = document.getElementById('energy-stat');
        const cognitiveStat = document.getElementById('cognitive-stat');
        const judgmentStat = document.getElementById('judgment-stat');
        const attitudeStat = document.getElementById('attitude-stat');
        const traitAnalysis = document.getElementById('trait-analysis');
        const strengthsWeaknesses = document.getElementById('strengths-weaknesses');
        const careerAdvice = document.getElementById('career-advice');
        const relationshipAdvice = document.getElementById('relationship-advice');
        const cognitiveFunctionsContainer = document.getElementById('cognitive-functions-container');

        // 测试状态
        let currentQuestion = 0;
        let answers = [];
        let userScores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };

        // 初始化测试
        function initTest() {
            currentQuestion = 0;
            answers = [];
            userScores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            updateQuestion();
            updateProgress();
        }

        // 更新问题
        function updateQuestion() {
            const question = questions[currentQuestion];
            questionText.textContent = question.text;
            
            // 清空选项容器
            optionsContainer.innerHTML = '';
            
            // 添加选项
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-circle"></div>
                    <div class="option-text">${option.text}</div>
                `;
                
                // 检查是否已选择该选项
                if (answers[currentQuestion] === index) {
                    optionElement.classList.add('selected');
                }
                
                optionElement.addEventListener('click', () => selectOption(index));
                optionsContainer.appendChild(optionElement);
            });
            
            // 更新导航按钮状态
            prevBtn.disabled = currentQuestion === 0;
            
            if (currentQuestion === questions.length - 1) {
                nextBtn.textContent = '查看结果';
            } else {
                nextBtn.textContent = '下一题';
            }
        }

        // 选择选项
        function selectOption(optionIndex) {
            // 移除之前的选择
            const options = document.querySelectorAll('.option');
            options.forEach(option => option.classList.remove('selected'));
            
            // 标记当前选择
            options[optionIndex].classList.add('selected');
            
            // 保存答案
            answers[currentQuestion] = optionIndex;
            
            // 更新分数
            const selectedOption = questions[currentQuestion].options[optionIndex];
            userScores[selectedOption.score]++;
        }

        // 更新进度
        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
            progressText.textContent = `问题 ${currentQuestion + 1}/${questions.length}`;
        }

        // 计算MBTI类型
        function calculateResult() {
            const energy = userScores.E > userScores.I ? 'E' : 'I';
            const cognitive = userScores.S > userScores.N ? 'S' : 'N';
            const judgment = userScores.T > userScores.F ? 'T' : 'F';
            const attitude = userScores.J > userScores.P ? 'J' : 'P';
            
            return energy + cognitive + judgment + attitude;
        }

        // 显示认知功能
        function displayCognitiveFunctions(functions) {
            cognitiveFunctionsContainer.innerHTML = '';
            
            functions.forEach(func => {
                const functionCard = document.createElement('div');
                functionCard.className = 'function-card';
                functionCard.innerHTML = `
                    <div class="function-name">${func.name}</div>
                    <div class="function-description">${func.description}</div>
                `;
                cognitiveFunctionsContainer.appendChild(functionCard);
            });
        }

        // 显示结果
        function showResult() {
            const type = calculateResult();
            const data = personalityData[type] || personalityData['INFJ']; // 默认为INFJ
            
            personalityType.textContent = type;
            typeDescription.textContent = `${data.name} - ${data.description}`;
            energyTrait.textContent = data.energy;
            cognitiveTrait.textContent = data.cognitive;
            judgmentTrait.textContent = data.judgment;
            attitudeTrait.textContent = data.attitude;
            energyStat.textContent = data.population || "";
            
            // 更新详细分析内容
            traitAnalysis.textContent = data.analysis;
            
            // 更新优势和弱点部分
            document.querySelector('.analysis-point:nth-child(1) p').textContent = data.coreValues || data.strengths;
            document.querySelector('.analysis-point:nth-child(2) p').textContent = data.innerDrive || "";
            document.querySelector('.analysis-point:nth-child(3) p').textContent = data.fears || "";
            
            // 更新职业建议部分
            careerAdvice.textContent = data.career;
            document.querySelectorAll('.analysis-grid')[2].children[0].querySelector('p').textContent = data.idealEnvironment || "";
            document.querySelectorAll('.analysis-grid')[2].children[1].querySelector('p').textContent = data.careerPath || "";
            document.querySelectorAll('.analysis-grid')[2].children[2].querySelector('p').textContent = data.leadershipStyle || "";
            
            // 更新关系建议部分
            relationshipAdvice.textContent = data.relationships;
            document.querySelectorAll('.analysis-grid')[3].children[0].querySelector('p').textContent = data.relationshipTraits || "";
            document.querySelectorAll('.analysis-grid')[3].children[1].querySelector('p').textContent = data.familyRole || "";
            document.querySelectorAll('.analysis-grid')[3].children[2].querySelector('p').textContent = data.relationshipChallenges || "";
            
            // 更新人际交往部分
            document.querySelectorAll('.analysis-grid')[4].children[0].querySelector('p').textContent = data.socialPreferences || "";
            document.querySelectorAll('.analysis-grid')[4].children[1].querySelector('p').textContent = data.communicationStyle || "";
            document.querySelectorAll('.analysis-grid')[4].children[2].querySelector('p').textContent = data.friendshipPattern || "";
            
            // 更新成长建议
            document.querySelectorAll('.analysis-grid')[1].children[2].querySelector('p').textContent = data.growthAdvice || "";
            
            if (data.cognitiveFunctions) {
                displayCognitiveFunctions(data.cognitiveFunctions);
            }
            
            testSection.style.display = 'none';
            resultSection.style.display = 'block';
        }

        // 事件监听
        startTestBtn.addEventListener('click', () => {
            introSection.style.display = 'none';
            testSection.style.display = 'block';
            initTest();
        });

        prevBtn.addEventListener('click', () => {
            if (currentQuestion > 0) {
                currentQuestion--;
                updateQuestion();
                updateProgress();
            }
        });

        nextBtn.addEventListener('click', () => {
            if (answers[currentQuestion] === undefined) {
                alert('请选择一个选项');
                return;
            }
            
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                updateQuestion();
                updateProgress();
            } else {
                showResult();
            }
        });

        restartBtn.addEventListener('click', () => {
            resultSection.style.display = 'none';
            introSection.style.display = 'block';
        });
    </script>
</body>
</html>
